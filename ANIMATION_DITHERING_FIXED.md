# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î—Ä–æ–∂–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–æ—è–Ω–∏–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

## –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞

–ò–≥—Ä–æ–∫ –±–æ–ª—å—à–µ **–ù–ï –¥—Ä–æ–∂–∏—Ç** –º–µ–∂–¥—É –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ `idle` –∏ `jump` –ø—Ä–∏ —Å—Ç–æ—è–Ω–∏–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–±—Ä–∞–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å `is_grounded`

**–ë–´–õ–û (–≤ simple_game.py):**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–ª–∏–∑–∏–∏ –∏–≥—Ä–æ–∫–∞ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏
self.player.is_grounded = False  # ‚ùå –°–±—Ä–∞—Å—ã–≤–∞–ª–∏ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä!
for platform in self.platforms:
    self.player.check_platform_collision(platform.rect)
```

**–°–¢–ê–õ–û:**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–ª–∏–∑–∏–∏ –∏–≥—Ä–æ–∫–∞ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏
for platform in self.platforms:
    self.player.check_platform_collision(platform.rect)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—Ç–æ–∏—Ç –ª–∏ –∏–≥—Ä–æ–∫ –Ω–∞ –∑–µ–º–ª–µ (–ø–æ—Å–ª–µ –≤—Å–µ—Ö –∫–æ–ª–ª–∏–∑–∏–π)
platform_rects = [platform.rect for platform in self.platforms]
if not self.player.check_if_on_ground(platform_rects) and self.player.is_grounded:
    self.player.is_grounded = False
```

### 2. –î–æ–±–∞–≤–∏–ª–∏ –±—É—Ñ–µ—Ä–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

```python
# –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
self.in_air_frames = 0  # –°—á–µ—Ç—á–∏–∫ –∫–∞–¥—Ä–æ–≤ –≤ –≤–æ–∑–¥—É—Ö–µ

# –í update():
if self.is_grounded and abs(self.velocity.y) < 0.5:
    self.velocity.y = 0  # –û–±–Ω—É–ª—è–µ–º –º–∏–∫—Ä–æ-—Å–∫–æ—Ä–æ—Å—Ç—å
    self.in_air_frames = 0
else:
    self.in_air_frames += 1

# –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–Ω–∞ –∑–µ–º–ª–µ"
effective_on_ground = self.is_grounded and self.in_air_frames < 3
```

### 3. –£–ª—É—á—à–∏–ª–∏ –ª–æ–≥–∏–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏–π

```python
def _update_state(self):
    effective_on_ground = self.is_grounded and self.in_air_frames < 3
    
    if not effective_on_ground:
        self.current_state = "jumping"      # –í –≤–æ–∑–¥—É—Ö–µ
    elif abs(self.velocity.x) > 50.0:
        self.current_state = "walking"      # –î–≤–∏–∂–µ—Ç—Å—è
    else:
        self.current_state = "idle"         # –°—Ç–æ–∏—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
```

### 4. –î–æ–±–∞–≤–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –Ω–∞ –∑–µ–º–ª–µ

```python
def check_if_on_ground(self, platforms):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—Ç–æ–∏—Ç –ª–∏ –∏–≥—Ä–æ–∫ –Ω–∞ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ."""
    player_rect = self.get_rect()
    ground_check_rect = pygame.Rect(
        player_rect.x + 5,      # –û—Ç—Å—Ç—É–ø –æ—Ç –∫—Ä–∞–µ–≤
        player_rect.bottom,     # –ü–æ–¥ –∏–≥—Ä–æ–∫–æ–º
        player_rect.width - 10, # –®–∏—Ä–∏–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
        5                       # 5 –ø–∏–∫—Å–µ–ª–µ–π –≤–Ω–∏–∑
    )
    
    for platform in platforms:
        if ground_check_rect.colliderect(platform):
            return True
    return False
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ:

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å—Ç–æ—è–Ω–∏–µ** - –ø–æ—Å–ª–µ 3 –∫–∞–¥—Ä–æ–≤ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ ‚Üí —Å—Ç–∞–±–∏–ª—å–Ω—ã–π `idle`
2. **–î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –∑–µ–º–ª–µ** - —á–µ—Ç–∫–æ `walking` –ø—Ä–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ > 50px/s
3. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞** - –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ `walking` ‚Üí `idle` –ø—Ä–∏ –∑–∞–º–µ–¥–ª–µ–Ω–∏–∏
4. **–ü—Ä—ã–∂–æ–∫** - —Å—Ç–∞–±–∏–ª—å–Ω–æ `jumping` –≤ –≤–æ–∑–¥—É—Ö–µ
5. **–ü—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ `jumping` ‚Üí `idle`

### üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏:

- **–ë—É—Ñ–µ—Ä –º–∏–∫—Ä–æ-—Å–∫–æ—Ä–æ—Å—Ç–∏:** `< 0.5 px/s` –æ–±–Ω—É–ª—è–µ—Ç—Å—è
- **–ë—É—Ñ–µ—Ä –∫–∞–¥—Ä–æ–≤ –≤ –≤–æ–∑–¥—É—Ö–µ:** `< 3 –∫–∞–¥—Ä–∞` —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞ –∑–µ–º–ª–µ  
- **–ü–æ—Ä–æ–≥ –¥–≤–∏–∂–µ–Ω–∏—è:** `> 50.0 px/s` –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ö–æ–¥—å–±—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–µ–º–ª–∏:** 5px –ø–æ–¥ –∏–≥—Ä–æ–∫–æ–º —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ –ø–æ –∫—Ä–∞—è–º

## –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

–ù–∞–∂–º–∏ **F1** –≤ –∏–≥—Ä–µ –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
- `effective_on_ground` - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –∑–µ–º–ª–µ
- `velocity.y` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0.0 –ø—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —Å—Ç–æ—è–Ω–∏–∏  
- `in_air_frames` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 3 –ø—Ä–∏ —Å—Ç–æ—è–Ω–∏–∏
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- ‚úÖ `game/simple_player.py` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ `simple_game.py` - —É–±—Ä–∞–Ω –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å is_grounded
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

**–î—Ä–æ–∂–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ!**

- –ü—Ä–∏ —Å—Ç–æ—è–Ω–∏–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö: **–¢–û–õ–¨–ö–û** `idle` –∞–Ω–∏–º–∞—Ü–∏—è (static.png)
- –ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ –∑–µ–º–ª–µ: **–¢–û–õ–¨–ö–û** `walking` –∞–Ω–∏–º–∞—Ü–∏—è (walk/*.png)  
- –ü—Ä–∏ –ø—Ä—ã–∂–∫–µ/–ø–∞–¥–µ–Ω–∏–∏: **–¢–û–õ–¨–ö–û** `jumping` –∞–Ω–∏–º–∞—Ü–∏—è (jump.png)
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –±–µ–∑ –¥—Ä–æ–∂–∞–Ω–∏—è

–ò–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ